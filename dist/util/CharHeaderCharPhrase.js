sap.ui.define(["sap/base/assert","sap/m/Input","gramont/VCDSM/specedit/util/CharHeaderBase","gramont/VCDSM/specedit/util/CharHeaderBaseConst","gramont/VCDSM/specedit/util/CharHeaderException","gramont/VCDSM/specedit/util/ModelManagerAdmin","gramont/VCDSM/specedit/util/ModelManagerAutoGrowOp","gramont/VCDSM/specedit/util/ModelManagerIntStatus"],function(e,t,a,r,s,i,n,h){"use strict";var l=function(e,t){a.call(this,e,t);e.initClassExtension(this,"gramont.VCDSM.specedit.util.CharHeaderCharPhrase",arguments);this._bIsRealPhrase=t.IS_REAL_PHRASE;this._FLG_IS_PHR=t.FLG_IS_PHR;this._datatype=t.ATFOR;this._datalength=t.ANZST};l.prototype=Object.create(a.prototype);l.prototype.constructor=l;l.prototype.parseCharValues=function(t,a){e(t.FIELDNAME==this._sFieldName,"Fieldname mismatch");var i=t.FIELDVALUE;var n=t.FIELDPHRASE;var h=[];if(n!=""){var l=this._bIsMultiValue?i.split(r.FieldValueSep):[i];var u=this._bIsMultiValue?n.split(r.FieldValueSep):[n];if(l.length!=u.length)throw new s("CharHeaderCharPhrase.error.countMismatch",[this._sFieldName]);for(var o=0;o<l.length;o++){if(t.IS_CHECK_BOX=="X"){if(l[o]=="X"){var p=true;var c=u[o]}else{var p=false;var c=u[o]}}else{var p=l[o];var c=u[o]}var v=this._parseCharValue(p,c);h.push(v)}}else{if(t.IS_CHECK_BOX=="X"){this.chckbx="X";if(i=="X"){var p=true;var c=n}else{var p=false;var c=n}var v=this._parseCharValue(p,c);h.push(v)}}if(!this._bIsMultiValue&&h.length==0){var v=this._emptyCharValue();h.push(v)}a[this._sFieldName]=h;this._storeEditable(a,t.IS_EDITABLE)};l.prototype.getIsRealPhrase=function(){return this._bIsRealPhrase};l.prototype._parseCharValue=function(e,t){if(t==""&&this.chckbx!="X")throw new s("CharHeaderCharPhrase.error.emptyPhrase",[this._sFieldName]);var a=this._createCharPhrase(e,t);return a};l.prototype._convertCharValue=function(e){return e.phrase};l.prototype._emptyCharValue=function(){if(this._isCheckBox==true){var e=this._createCharPhrase(false,"")}else{var e=this._createCharPhrase("","")}return e};l.prototype._isEmptyCharValue=function(e){var t=e.phrase=="";return t};l.prototype._isCharValueEqual=function(e,t){var a=e.phrase==t.phrase;return a};l.prototype._getCharValueInputImpl=function(e,a){var r=e!=null;if(this._isCheckBox==false){var s=new t({value:{path:a+"/"+(r?"value":"phrase")},width:this._calculateCharValueInputWidth(),change:jQuery.proxy(this._onChange,this,r),enabled:this._calculateEnabledBinding(e)})}else{var s=new sap.m.Switch({state:{path:a+"/value"},customTextOn:"Yes",customTextOff:"No",change:jQuery.proxy(this._onChange,this,r),enabled:this._calculateEnabledBinding(e)})}return s};l.prototype._formatterForCharValue=function(e,t){return e?t.value:t.phrase};l.prototype._parseCharValueOfCharEntry=function(e,t){var a=this._parseCharValue(t,e);return a};l.prototype._createCharEntryFromCharValue=function(e){var t=this._makeCharEntryFromCharValue(e,e.value);return t};l.prototype._getCharEntryFilterPath=function(){return"phrase"};l.prototype._createCharValueFromValueHelperValue=function(e,t){return null};l.prototype._createCharPhrase=function(e,t){var a={value:e,phrase:t};return a};l.prototype._onChange=function(e,t){var a=t.getSource();var r=a.getModel();var s=a.getBindingContext().getPath().split("/");if(a.getBindingPath("value")!=null){var n=a.getBindingPath("value").split("/")}else{var n=a.getBindingPath("state").split("/");var l=parseInt(n[1]);var u="/"+l+"/"+i.FullPropName.IntStatus;var o=r.getProperty(u);var p=null;switch(o){case h.Empty:p=h.New;break;case h.Unchanged:p=h.Modified;break}if(p!=null)r.setProperty(u,p)}var c=[].concat(s,n);c[c.length-1]=e?"phrase":"value";var v=c.join("/");if(a.getBindingPath("value")!=null){var C=t.getParameter("value")}else{var C=t.getParameter("state")}r.setProperty(v,C)};return l});