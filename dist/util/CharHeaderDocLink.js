sap.ui.define(["sap/base/assert","sap/m/library","sap/m/Link","gramont/VCDSM/specedit/util/CharEditDocLink","gramont/VCDSM/specedit/util/CharHeaderBase","gramont/VCDSM/specedit/util/CharHeaderException"],function(e,t,r,o,i,n){"use strict";var a="__FTEXT_";var s=function(e,t){i.call(this,e,t);e.initClassExtension(this,"gramont.VCDSM.specedit.util.CharHeaderDocLink",arguments);this._bIsMultiValue=true;if(this._sFieldName.indexOf(a)!=0)throw new n("CharHeaderDocLink.error.invalidFieldName",[this._sFieldName]);this._sTextType=this._sFieldName.substr(a.length);this._sDocType=t.DOKAR};s.prototype=Object.create(i.prototype);s.prototype.constructor=s;s.prototype.parseCharValues=function(t,r){e(t.FIELDNAME==this._sFieldName,"Fieldname mismatch");var o=t.FIELDVALUE;var i=null;try{i=JSON.parse(o)}catch(e){if(!(e instanceof SyntaxError))throw e}if(!i)throw new n("CharHeaderDocLink.error.parse",[this._sFieldName]);var a=i.DATA;if(jQuery.type(a)!="array")throw new n("CharHeaderDocLink.error.parse",[this._sFieldName]);r[this._sFieldName]=a;this._storeEditable(r,t.IS_EDITABLE)};s.prototype.convertCharValues=function(e){return null};s.prototype.fetchValueHelperFirst=function(){return false};s.prototype.getTextType=function(){return this._sTextType};s.prototype.getDocType=function(){return this._sDocType};s.prototype.buildCharValues=function(e){var t=e;return t};s.prototype.openDoc=function(e){var r=this._oComponent.getODataManager().getDocDownloadURL(e);t.URLHelper.redirect(r,true)};s.prototype._createDisplayValueControlMultiTemplateImpl=function(){var e=new r({text:{path:"FILENAME"},press:jQuery.proxy(this._onDocOpen,this)});return e};s.prototype._isEditButtonAlwaysEnabled=function(){return true};s.prototype._createEditDialog=function(){var e=new o(this._oComponent);return e};s.prototype._onDocOpen=function(e){var t=e.getSource().getBindingContext().getProperty();this.openDoc(t)};return s});