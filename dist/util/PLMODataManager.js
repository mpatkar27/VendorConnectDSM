sap.ui.define(["sap/base/assert","gramont/VCDSM/specedit/util/CharHeaderException","gramont/VCDSM/specedit/util/CharHeaderFactory","gramont/VCDSM/specedit/util/ODataManager","gramont/VCDSM/specedit/util/ODataManagerException","gramont/VCDSM/specedit/util/Util"],function(e,t,r,a,s,o){"use strict";var n={CREATE:"X-MSE-CreateIndex",PARENT:"X-MSE-ParentIndex"};var i=function(e){a.call(this,e);e.initClassExtension(this,"gramont.VCDSM.specedit.util.PLMODataManager",arguments);this._oCharHeaderFactory=new r(this._oComponent)};i.prototype=Object.create(a.prototype);i.prototype.constructor=i;i.prototype.requestForFetchConfig=function(e){this._checkInit();var t=this._createBatchOperation("/GetConfig","GET");var r=function(e){var t=e[0].data;var r={language:t.LANGU};return r};var a={messageKey:e,batchRequests:[t],process:r};return a};i.prototype.requestForFetchLogo=function(e){var t=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/GetLogoDoc?","GET");var a=function(e){var t=e[0].data.results[0];var r=[];r.push(t);var a={entries:r};return a};var s={messageKey:"PLMODataManager.error.logo.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForFetchitmkey=function(){this._checkInit();var e=this._createBatchOperation("/RecnGen","GET");var t=function(e){var t=e[0].data;return t};var r={batchRequests:[e],process:t};return r};i.prototype.requestForFetchSpecificationList=function(){this._checkInit();var e=["favorites","lastacc","rchgd"];var t=[];for(var r=0;r<e.length;r++){var a=e[r];var s="/GetSpecList?"+this._escapeParamsForFI({Kind:a});var o=this._createBatchOperation(s,"GET");t.push(o)}var n=function(t){var r={};for(var a=0;a<e.length;a++){var s=e[a];r[s]=t[a].data.results}return r};var i={messageKey:"PLMODataManager.error.specList",batchRequests:t,process:n};return i};i.prototype.requestForFetchText=function(e){this._checkInit();var t=this._escapeParamsForFI({Phrkey:e});var r=this._createBatchOperation("/GetTextValue?"+t,"GET");var a=[];a.push(r);var s=function(e){var t={};for(var r=0;r<e.length;r++){t[r]=e[r].data.results}return t};var o={messageKey:"PLMODataManager.error.fetchtext",batchRequests:a,process:s};return o};i.prototype.requestForFetchDoclist=function(e){this._checkInit();var t=this._escapeParamsForFI({RECNROOT:e});var r=this._createBatchOperation("/GetDocList?"+t,"GET");var a=[];a.push(r);var s=function(e){var t={};for(var r=0;r<e.length;r++){t[r]=e[r].data.results}return t};var o={messageKey:"PLMODataManager.error.fetchdoclist",batchRequests:a,process:s};return o};i.prototype.requestForFetchSpecificationInfo=function(e){this._checkInit();this._checkSpecificationSUBIDKey(e);var t=o.convertDateToString(e.KEYDATE);var r=this._escapeParamsForFI({SUBID:e.SUBID,KEYDATE:t});var a=this._createBatchOperation("/GetSpecInfo?"+r,"GET");var s=function(e){var t=e[0].data;return t};var n={messageKey:"PLMODataManager.error.specInfo",batchRequests:[a],process:s};return n};i.prototype.requestForFetchHeaderInfo=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ACTIVITY:e.actvtparam});var r=this._createBatchOperation("/HeaderInfoCollection("+t+")","GET");var a=function(e){var t=e[0].data;return t};var s={messageKey:"PLMODataManager.error.headerInfo.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForFetchBasicData=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/BasicDataCollection("+t+")","GET");var a=function(e){var t=e[0].data;return t};var s={messageKey:"PLMODataManager.error.basicData.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForUpdateBasicData=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._filterBasicData(e);var a=this._createBatchOperation("/BasicDataCollection("+t+")","PUT",r);var s={messageKey:"PLMODataManager.error.basicData.update",batchRequests:[a],change:true};return s};i.prototype.requestForValidateInput=function(e){var t=this._escapeParamsForFI({ATNAM:e.ATNAM,ATWRT:e.ATWRT});var r=this._createBatchOperation("/ValidateInput?"+t,"GET");var a=function(e){var t=e[0].data;return t};var s={messageKey:"PLMODataManager.error.validate.input",batchRequests:[r],process:a};return s};i.prototype.requestForFetchIdentifier=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/BasicDataCollection("+t+")/Identifiers","GET");var a=function(e){var t=e[0].data.results;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.identifier.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForCreateIdentifier=function(e,t){this._checkInit();var r=e.parentKey;this._checkSpecificationKey(r);var a=this._escapeParamsForKey({RECNROOT:r.RECNROOT,ACTN:r.ACTN});var s=this._filterIdentifier(t);var o=this._createBatchOperation("/BasicDataCollection("+a+")/Identifiers","POST",s);var n=function(e){var t=e[0].data;return t};var i={messageKey:"PLMODataManager.error.identifier.create",batchRequests:[o],process:n,change:true};return i};i.prototype.requestForUpdateIdentifier=function(e){this._checkInit();this._checkIdentifierKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,ACTN:e.ACTN,RECN:e.RECN});var r=this._filterIdentifier(e);var a=this._createBatchOperation("/IdentifiersCollection("+t+")","PUT",r);var s={messageKey:"PLMODataManager.error.identifier.update",batchRequests:[a],change:true};return s};i.prototype.requestForDeleteIdentifier=function(e){this._checkInit();this._checkIdentifierKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,ACTN:e.ACTN,RECN:e.RECN});var r=this._createBatchOperation("/IdentifiersCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.identifier.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchDefaultIdentifier=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/BasicDataCollection("+t+")/DefaultIdentifiers","GET");var a=function(e){var t=e[0].data.results;var r={defaultIdentifiers:t};return r};var s={messageKey:"PLMODataManager.error.defaultIdentifier.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForFetchPropTree=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this;var r=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var a=this._createBatchOperation("/BasicDataCollection("+r+")/PTreeList?$expand=PTree","GET");var s=function(e){var r=e[0].data.results;for(var a=0;a<r.length;a++){var s=r[a];var o=s.MENID;var n=s.PTree.results;delete s.PTree;var i=t._buildPropTree(o,n);s.rootNode=i.rootNode;s.levelCount=i.levelCount}var c={propTrees:r};return c};var o={messageKey:"PLMODataManager.error.propTree",batchRequests:[a],process:s};return o};i.prototype.requestForFetchInstance=function(e,r,a){this._checkInit();this._checkPropertyKey(e);var o=this;var n=[];if(e.Phrkey==""||e.Phrkey==null){if(r){var i=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,MENID:"",ID:"",ESTCAT:e.ESTCAT});var c=this._createBatchOperation("/GetPTreeInfo?"+i,"GET");n.push(c)}if(!a){var i=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT});var c=this._createBatchOperation("/GetInstanceHeader?"+i,"GET");n.push(c)}var i=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,MENID:"",ID:"",ESTCAT:e.ESTCAT});var c=this._createBatchOperation("/GetInstanceList?"+i,"GET");n.push(c);var C=function(e){var n=0;var i=null;var c=null;if(r)i=e[n++].data;if(!a){var C=e[n++].data.results;var T={};var u=[];for(var h=0;h<C.length;h++){var N=C[h];var E;try{E=o._oCharHeaderFactory.create(N)}catch(e){if(!(e instanceof t))throw e;throw new s(e.messageKey,e.args)}T[E.getFieldName()]=E;u.push(E)}a={byFieldName:T,byOrder:u}}var R=e[n++].data.results;c=o._buildInstances(a.byFieldName,R);var p={info:i,charHeaderInfo:a,entries:c};return p};var T={messageKey:"PLMODataManager.error.prop.fetch",batchRequests:n,process:C};return T}else if(e.Phrkey=="doc"){this._checkInit();var u=this._escapeParamsForFI({RECNROOT:e.RECNROOT});var c=this._createBatchOperation("/GetDocList?"+u,"GET");n.push(c);var C=function(e){var t={};for(var r=0;r<e.length;r++){t[r]=e[r].data.results}return t};var T={messageKey:"PLMODataManager.error.doclist",batchRequests:n,process:C};return T}else if(e.Phrkey=="udt"){this._checkInit();var u=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT,RECNPARENT:e.RECNPARENT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var c=this._createBatchOperation("/InstanceUserdefinedText?"+u,"GET");n.push(c);var C=function(e){var t={};for(var r=0;r<e.length;r++){t[r]=e[r].data}return t};var T={messageKey:"PLMODataManager.error.udt",batchRequests:n,process:C};return T}else{this._checkInit();var u=this._escapeParamsForFI({Phrkey:e.Phrkey});var c=this._createBatchOperation("/GetTextValue?"+u,"GET");n.push(c);var C=function(e){var t={};for(var r=0;r<e.length;r++){t[r]=e[r].data.results}return t};var T={messageKey:"PLMODataManager.error.fetchtext",batchRequests:n,process:C};return T}};i.prototype.requestForCreateInstance=function(e,t,r){this._checkInit();var a=e.parentKey;this._checkPropertyKey(a);var s=this._buildInstanceBatchRequests(t,r);var o=this._escapeParamsForFI({RECNROOT:a.RECNROOT,ACTN:a.ACTN,MENID:a.MENID,ID:a.ID,ESTCAT:a.ESTCAT});var i={};i[n.CREATE]=e.createIndex.toString();var c=this._createBatchOperation("/CreateInstance?"+o,"POST",null,i);s.push(c);var C=function(e){var t=e[s.length-1].data;return t};var T={messageKey:"PLMODataManager.error.prop.create",batchRequests:s,process:C,change:true};return T};i.prototype.requestForCreateInstanceUDT=function(e){this._checkInit();var t=[];var r=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,MENID:e.MENID,ID:e.ID,ESTCAT:e.ESTCAT});var a=this._createBatchOperation("/CreateInstance?"+r,"POST",null,null);t.push(a);var s=function(e){var r=e[t.length-1].data;return r};var o={messageKey:"PLMODataManager.error.prop.create",batchRequests:t,process:s,change:true};return o};i.prototype.requestForUpdateInstance=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=this._buildInstanceBatchRequests(e,t);var a=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var s=this._createBatchOperation("/UpdateInstance?"+a,"POST");r.push(s);var o={messageKey:"PLMODataManager.error.prop.update",batchRequests:r,change:true};return o};i.prototype.requestForDeleteInstance=function(e){this._checkInit();this._checkInstanceKey(e);var t=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var r=this._createBatchOperation("/DeleteInstance?"+t,"POST");var a={messageKey:"PLMODataManager.error.prop.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchCharValue=function(e,t){this._checkInit();var r=e.RECN_VP!=null;if(r)this._checkInstanceKey(e);else this._checkPropertyKey(e);var a=this;var s=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,MENID:r?"":e.MENID,ID:r?"":e.ID,ESTCAT:e.ESTCAT,RECNPARENT:r?e.RECNPARENT:"",ATNAM:t.getFieldName(),RECN_VP:r?e.RECN_VP:"",ACTN_VP:r?e.ACTN_VP:""});var o=this._createBatchOperation("/GetCharValue?"+s,"GET");var n=function(e){var r=a._buildCharEntries(t,e[0].data.results);return r};var i={messageKey:"PLMODataManager.error.charValue",batchRequests:[o],process:n};return i};i.prototype.requestForFetchCharValueHelperList=function(e,t){this._checkInit();var r=e.RECN_VP!=null;if(r)this._checkInstanceKey(e);else this._checkPropertyKey(e);var a=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,MENID:r?"":e.MENID,ID:r?"":e.ID,ESTCAT:e.ESTCAT,RECNPARENT:r?e.RECNPARENT:"",ATNAM:t.getFieldName(),RECN_VP:r?e.RECN_VP:"",ACTN_VP:r?e.ACTN_VP:""});var s=this._createBatchOperation("/GetCharValueHelperList?"+a,"GET");var o=function(e){var t=e[0].data.results;return t};var n={messageKey:"PLMODataManager.error.charValueHelperList",batchRequests:[s],process:o};return n};i.prototype.requestForFetchMultiComposition=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=this;var a=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var s=this._createBatchOperation("/GetMLC?"+a,"GET");var o=[s];if(this._extHookRequestForFetchCompositionAddBatchRequests){var n=this._extHookRequestForFetchCompositionAddBatchRequests(e,t);o=o.concat(n)}var i=function(e){var a=e[0].data.results;var s={entries:a};if(r._extHookRequestForFetchCompositionProcess){var o=e.slice(1);r._extHookRequestForFetchCompositionProcess(t,o,s)}return s};var c={messageKey:"PLMODataManager.error.composition.fetch",batchRequests:o,process:i};return c};i.prototype.requestForFetchMLCSpecValue=function(e){var t=this;if(e.SUBID==undefined)e.SUBID="";if(e.IDENT1==undefined)e.IDENT1="";if(e.ESTCAT==undefined)e.ESTCAT="";var r=this._escapeParamsForFI({SUBID:e.SUBID,IDENT_DESCR1:e.IDENT1,ESTCAT:e.ESTCAT});var a=this._createBatchOperation("/SpecSearchHelp?"+r,"GET");var s=[a];var o=function(e){var t=e[0].data.results;var r={entries:t};return r};var n={messageKey:"PLMODataManager.error.composition.fetch",batchRequests:s,process:o};return n};i.prototype.requestForFetcUsageDetails=function(e){var t=this;if(e.RECNROOT==undefined)e.RECNROOT="";if(e.ACTN==undefined)e.IDENT1="";if(e.ESTCAT==undefined)e.ESTCAT="";if(e.RECN_VP==undefined)e.RECN_VP="";if(e.ACTN_VP==undefined)e.ACTN_VP="";if(e.RECNPARENT==undefined)e.RECNPARENT="";var r=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var a=this._createBatchOperation("/GetUsage?"+r,"GET");var s=[a];var o=function(e){var t=e[0].data.results;var r={entries:t};return r};var n={messageKey:"PLMODataManager.error.composition.fetch",batchRequests:s,process:o};return n};i.prototype.requestForCreateMultiComposition=function(e,t,r){this._checkInit();var a=e.parentKey;if(a)this._checkInstanceKey(a);var s=this._escapeParamsForKey({RECNROOT:a?a.RECNROOT:"0",ACTN:a?a.ACTN:"0",RECNPARENT:a?a.RECNPARENT:"0",ESTCAT:a?a.ESTCAT:"",RECN_VP:a?a.RECN_VP:"0",ACTN_VP:a?a.ACTN_VP:"0"});var o={};var i=e.parentIndex;if(i!=null)o[n.PARENT]=i.toString();var c=this._filterComposition(t,r);var C=this._createBatchOperation("/InstanceCollection("+s+")/Composition","POST",c,o);var T=function(e){var t=e[0].data;return t};var u={messageKey:"PLMODataManager.error.composition.create",batchRequests:[C],process:T,change:true};return u};i.prototype.requestForUpdateMultiComposition=function(e,t){this._checkInit();var r=this._escapeParamsForFI({ABS_QTY:e.ABS_QTY,ACTN:e.ACTN,ACTN_VP:e.ACTN_VP,CHILD_KEY:e.CHILD_KEY,COMPCAT:e.COMPCAT,COMPNAM:e.COMPNAM,ESTCAT:e.ESTCAT,EXP_LEVEL:e.EXP_LEVEL.toString(),IDENT1:e.IDENT1,ITEM_KEY:e.ITEM_KEY,ORD:e.ORD,PARENT_KEY:e.PARENT_KEY,RECN:e.RECN,RECNPARENT:e.RECNPARENT,RECNROOT:e.RECNROOT,RECN_VP:e.RECN_VP,ROW_KEY:e.ROW_KEY,SORTNO:e.SORTNO,SUBID:e.SUBID,UOM:e.UOM,COMPAVG:e.COMPAVG.toString(),DELFLG:e.DELFLG});var a=this._createBatchOperation("/UpdateMLC?"+r,"POST");var s={messageKey:"PLMODataManager.error.multicomposition.update",batchRequests:[a],change:true};return s};i.prototype.requestForUpdateUsagedat=function(e){this._checkInit();var t=this._escapeParamsForFI({ACTN:e.ACTN,ACTVFLG:false,ESTCAT:e.ESTCAT,ESNTFLG:false,EXCLFLG:false,RECN:"",RVLID:e.RVLID,RVLNAM:e.RVLNAM,RVLTYPE:"",RVLTYPENAM:"",RECNROOT:e.RECNROOT,RECNMST:e.RECNMST,RECNPARENT:e.RECNPARENT,VACLID:"",VACLNAM:""});var r=this._createBatchOperation("/UpdateUsage?"+t,"POST");var a={messageKey:"PLMODataManager.error.UpdateUsage.update",batchRequests:[r],change:true};return a};i.prototype.requestForDeleteMultiComposition=function(e){this._checkInit();this._checkCompositionKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var r=this._createBatchOperation("/CompositionCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.composition.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchComposition=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=this;var a=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var s=this._createBatchOperation("/InstanceCollection("+a+")/Composition","GET");var o=[s];if(this._extHookRequestForFetchCompositionAddBatchRequests){var n=this._extHookRequestForFetchCompositionAddBatchRequests(e,t);o=o.concat(n)}var i=function(e){var a=e[0].data.results;var s={entries:a};if(r._extHookRequestForFetchCompositionProcess){var o=e.slice(1);r._extHookRequestForFetchCompositionProcess(t,o,s)}return s};var c={messageKey:"PLMODataManager.error.composition.fetch",batchRequests:o,process:i};return c};i.prototype.requestForCreateComposition=function(e,t,r){this._checkInit();var a=e.parentKey;if(a)this._checkInstanceKey(a);var s=this._escapeParamsForKey({RECNROOT:a?a.RECNROOT:"0",ACTN:a?a.ACTN:"0",RECNPARENT:a?a.RECNPARENT:"0",ESTCAT:a?a.ESTCAT:"",RECN_VP:a?a.RECN_VP:"0",ACTN_VP:a?a.ACTN_VP:"0"});var o={};var i=e.parentIndex;if(i!=null)o[n.PARENT]=i.toString();var c=this._filterComposition(t,r);var C=this._createBatchOperation("/InstanceCollection("+s+")/Composition","POST",c,o);var T=function(e){var t=e[0].data;return t};var u={messageKey:"PLMODataManager.error.composition.create",batchRequests:[C],process:T,change:true};return u};i.prototype.requestForUpdateComposition=function(e,t){this._checkInit();this._checkCompositionKey(e);var r=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var a=this._filterComposition(e,t);var s=this._createBatchOperation("/CompositionCollection("+r+")","PUT",a);var o={messageKey:"PLMODataManager.error.composition.update",batchRequests:[s],change:true};return o};i.prototype.requestForDeleteComposition=function(e){this._checkInit();this._checkCompositionKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var r=this._createBatchOperation("/CompositionCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.composition.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchGroup=function(e){this._checkInit();this._checkPropertyKey(e);var t=this;var r=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT});var a=this._createBatchOperation("/GetGroup?"+r,"GET");var s=function(e){var r=e[0].data.results;var a=t._buildGroupInfo(r);return a};var o={messageKey:"PLMODataManager.error.group.fetch",batchRequests:[a],process:s};return o};i.prototype.requestForCompHeader=function(e){this._checkInit();this._checkPropertyKey(e);var t=this;var r=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT});var a=this._createBatchOperation("/GetCompHeader?"+r,"GET");var s=function(e){var t=e[0].data.results;return t};var o={messageKey:"PLMODataManager.error.CompHeader.fetch",batchRequests:[a],process:s};return o};i.prototype.requestForVatlist=function(e){this._checkInit();var t=this;var r=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var a=t._createBatchOperation("/GetVatList?"+r,"GET");var s=function(e){var t=e[0].data.results;return t};var o={messageKey:"PLMODataManager.error.VATList.fetch",batchRequests:[a],process:s};return o};i.prototype.requestForFetchdynQual=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=[];var a=this;if(e.RECNROOT==null){e.RECNROOT="0"}if(e.ACTN==null){e.ACTN="0"}if(e.RECNPARENT==null){e.RECNPARENT="0"}if(e.ESTCAT==null){e.ESTCAT="0"}if(e.RECN_VP==null){e.RECN_VP="0"}if(e.ACTN_VP==null){e.ACTN_VP="0"}var s=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var o=this._createBatchOperation("/InstanceQualToCompositionField?"+s,"GET");r.push(o);var n=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT});var i=this._createBatchOperation("/GetCompHeader?"+n,"GET");r.push(i);if(this._extHookRequestForFetchQualAddBatchRequests){var c=this._extHookRequestForFetchQualAddBatchRequests(e,t);r=r.concat(c)}var C=function(e){var r=e[0].data.results;var s=0;var o=e[0].data.results,n=[],i=[],c=e[1].data.results;s=0;for(var C=0;C<o.length;C++){if(C!=0&&o[C].KEY_VP!=o[C-1].KEY_VP){n["RECN"]=o[C-1].RECN;n["RECNROOT"]=o[C-1].RECNROOT;n["RECN_VP"]=o[C-1].RECN_VP;n["ACTN"]=o[C-1].ACTN;n["ACTN_VP"]=o[C-1].ACTN_VP;n["RECNPARENT"]=o[C-1].RECNPARENT;n["SPC_ACTN"]=o[C-1].SPC_ACTN;n["ESTCAT"]=o[C-1].ESTCAT;n["KEY_VP"]=o[C-1].KEY_VP;i[s]=jQuery.extend({},n);s++}for(var T=0;T<c.length;T++){if(o[C].FIELDNAME==c[T].ColId){if(c[T].AsRadiobutton==true){if(o[C].FIELDVALUE==""){n[o[C].FIELDNAME]=false}else{n[o[C].FIELDNAME]=true}}else{n[o[C].FIELDNAME]=o[C].FIELDVALUE}}}}if(C==o.length&&o.length!=0){n["RECN"]=o[C-1].RECN;n["RECNROOT"]=o[C-1].RECNROOT;n["RECN_VP"]=o[C-1].RECN_VP;n["ACTN"]=o[C-1].ACTN;n["ACTN_VP"]=o[C-1].ACTN_VP;n["RECNPARENT"]=o[C-1].RECNPARENT;n["SPC_ACTN"]=o[C-1].SPC_ACTN;n["ESTCAT"]=o[C-1].ESTCAT;n["KEY_VP"]=o[C-1].KEY_VP;i[s]=jQuery.extend({},n)}var u={entries:i};if(a._extHookRequestForFetchQualProcess){var h=e.slice(1);a._extHookRequestForFetchQualProcess(t,h,u)}return u};var T={messageKey:"PLMODataManager.error.qual.fetch",batchRequests:r,process:C};return T};i.prototype.requestForFetchQual=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=this;var a=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var s=this._createBatchOperation("/InstanceCollection("+a+")/Qual","GET");var o=[s];if(this._extHookRequestForFetchQualAddBatchRequests){var n=this._extHookRequestForFetchQualAddBatchRequests(e,t);o=o.concat(n)}var i=function(e){var a=e[0].data.results;var s={entries:a};if(r._extHookRequestForFetchQualProcess){var o=e.slice(1);r._extHookRequestForFetchQualProcess(t,o,s)}return s};var c={messageKey:"PLMODataManager.error.qual.fetch",batchRequests:o,process:i};return c};i.prototype.requestForFetchQuant=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=this;var a=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var s=this._createBatchOperation("/InstanceCollection("+a+")/Quant","GET");var o=[s];if(this._extHookRequestForFetchQualAddBatchRequests){var n=this._extHookRequestForFetchQualAddBatchRequests(e,t);o=o.concat(n)}var i=function(e){var a=e[0].data.results;var s={entries:a};if(r._extHookRequestForFetchQualProcess){var o=e.slice(1);r._extHookRequestForFetchQualProcess(t,o,s)}return s};var c={messageKey:"PLMODataManager.error.quant.fetch",batchRequests:o,process:i};return c};i.prototype.requestForFetchdynQuant=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=this;if(e.RECNROOT==null){e.RECNROOT="0"}if(e.ACTN==null){e.ACTN="0"}if(e.RECNPARENT==null){e.RECNPARENT="0"}if(e.ESTCAT==null){e.ESTCAT="0"}if(e.RECN_VP==null){e.RECN_VP="0"}if(e.ACTN_VP==null){e.ACTN_VP="0"}var a=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var s=this._createBatchOperation("/InstanceQuantToCompositionField?"+a,"GET");var o=[s];var n=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT});var i=this._createBatchOperation("/GetCompHeader?"+n,"GET");o.push(i);if(this._extHookRequestForFetchQuantAddBatchRequests){var c=this._extHookRequestForFetchQuantAddBatchRequests(e,t);o=o.concat(c)}var C=function(e){var a=0;var s=e[0].data.results,o=[],n=[],i=e[1].data.results;for(var c=0;c<s.length;c++){if(c!=0&&s[c].KEY_VP!=s[c-1].KEY_VP){o["RECN"]=s[c-1].RECN;o["RECNROOT"]=s[c-1].RECNROOT;o["RECN_VP"]=s[c-1].RECN_VP;o["ACTN"]=s[c-1].ACTN;o["ACTN_VP"]=s[c-1].ACTN_VP;o["RECNPARENT"]=s[c-1].RECNPARENT;o["SPC_ACTN"]=s[c-1].SPC_ACTN;o["ESTCAT"]=s[c-1].ESTCAT;o["KEY_VP"]=s[c-1].KEY_VP;n[a]=jQuery.extend({},o);a++}for(var C=0;C<i.length;C++){if(s[c].FIELDNAME==i[C].ColId){if(i[C].AsRadiobutton==true){if(s[c].FIELDVALUE==""){o[s[c].FIELDNAME]=false}else{o[s[c].FIELDNAME]=true}}else{o[s[c].FIELDNAME]=s[c].FIELDVALUE}}}}if(c==s.length&&s.length!=0){o["RECN"]=s[c-1].RECN;o["RECNROOT"]=s[c-1].RECNROOT;o["RECN_VP"]=s[c-1].RECN_VP;o["ACTN"]=s[c-1].ACTN;o["ACTN_VP"]=s[c-1].ACTN_VP;o["RECNPARENT"]=s[c-1].RECNPARENT;o["SPC_ACTN"]=s[c-1].SPC_ACTN;o["ESTCAT"]=s[c-1].ESTCAT;o["KEY_VP"]=s[c-1].KEY_VP;n[a]=jQuery.extend({},o)}var T={entries:n};if(r._extHookRequestForFetchQuantProcess){var u=e.slice(1);r._extHookRequestForFetchQuantProcess(t,u,T)}return T};var T={messageKey:"PLMODataManager.error.quant.fetch",batchRequests:o,process:C};return T};i.prototype.requestForFetchQualEmpty=function(e,t){this._checkInit();this._checkPropertyKey(e);var r=this;var a=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT});var s=this._createBatchOperation("/GetQualEmpty?"+a,"GET");var o=[s];if(this._extHookRequestForFetchQualEmptyAddBatchRequests){var n=this._extHookRequestForFetchQualEmptyAddBatchRequests(e,t);o=o.concat(n)}var i=function(e){var a=e[0].data.results;var s={entries:a};if(r._extHookRequestForFetchQualEmptyProcess){var o=e.slice(1);r._extHookRequestForFetchQualEmptyProcess(t,o,s)}return s};var c={messageKey:"PLMODataManager.error.qual.fetch",batchRequests:o,process:i};return c};i.prototype.requestForCreateQual=function(e,t,r,a){this._checkInit();var s=e.parentKey;if(s)this._checkInstanceKey(s);var o=this._escapeParamsForFI({RECNROOT:s?s.RECNROOT:"0",ACTN:s?s.ACTN:"0",RECNPARENT:s?s.RECNPARENT:"0",ESTCAT:s?s.ESTCAT:"",RECN_VP:s?s.RECN_VP:"0",ACTN_VP:s?s.ACTN_VP:"0",RECN:t.RECN});var i={};var c=e.parentIndex;if(c!=null)i[n.PARENT]=c.toString();var C="FIELDNAME";var T="FIELDVALUE";var u=[],h=[],N=[];for(var E=0;E<a.length;E++){u[C]=a[E].ColId;if(a[E].AsRadiobutton==true){if(t[a[E].ColId]==true)u[T]="X";else u[T]=""}else{u[T]=t[a[E].ColId]}h[E]=jQuery.extend({},u);var R=this._escapeParamsForFI({FieldName:u[C],FieldValue:u[T]});var p=this._createBatchOperation("/SetInstanceField?"+R,"POST");N.push(p)}var l=this._createBatchOperation("/UpdateInstanceQual?"+o,"POST");N.push(l);var _=function(e){var t=e[0].data;return t};var A={messageKey:"PLMODataManager.error.qual.create",batchRequests:N,process:_,change:true};return A};i.prototype.requestForDeleteQual=function(e){this._checkInit();this._checkQualKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var r=this._createBatchOperation("/QualCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.qual.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchQuantEmpty=function(e,t){this._checkInit();this._checkPropertyKey(e);var r=this;var a=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,ESTCAT:e.ESTCAT});var s=this._createBatchOperation("/GetQuantEmpty?"+a,"GET");var o=[s];if(this._extHookRequestForFetchQuantEmptyAddBatchRequests){var n=this._extHookRequestForFetchQuantEmptyAddBatchRequests(e,t);o=o.concat(n)}var i=function(e){var a=e[0].data.results;var s={entries:a};if(r._extHookRequestForFetchQuantEmptyProcess){var o=e.slice(1);r._extHookRequestForFetchQuantEmptyProcess(t,o,s)}return s};var c={messageKey:"PLMODataManager.error.quant.fetch",batchRequests:o,process:i};return c};i.prototype.requestForCreateQuant=function(e,t,r,a){this._checkInit();var s=e.parentKey;if(s)this._checkInstanceKey(s);var o=this._escapeParamsForFI({RECNROOT:s?s.RECNROOT:"0",ACTN:s?s.ACTN:"0",RECNPARENT:s?s.RECNPARENT:"0",ESTCAT:s?s.ESTCAT:"",RECN_VP:s?s.RECN_VP:"0",ACTN_VP:s?s.ACTN_VP:"0",RECN:t.RECN});var i={};var c=e.parentIndex;if(c!=null)i[n.PARENT]=c.toString();var C="FIELDNAME";var T="FIELDVALUE";var u=[],h=[],N=[];for(var E=0;E<a.length;E++){u[C]=a[E].ColId;if(a[E].AsRadiobutton==true){if(t[a[E].ColId]==true)u[T]="X";else u[T]=""}else{u[T]=t[a[E].ColId]}h[E]=jQuery.extend({},u);var R=this._escapeParamsForFI({FieldName:u[C],FieldValue:u[T]});var p=this._createBatchOperation("/SetInstanceField?"+R,"POST");N.push(p)}var l=this._createBatchOperation("/UpdateInstanceQuant?"+o,"POST");N.push(l);var _=function(e){var t=e[0].data;return t};var A={messageKey:"PLMODataManager.error.quant.create",batchRequests:N,process:_,change:true};return A};i.prototype.requestForDeleteQuant=function(e){this._checkInit();this._checkQuantKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var r=this._createBatchOperation("/QuantCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.quant.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchList=function(e,t){this._checkInit();this._checkInstanceKey(e);var r=this;var a=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var s=this._createBatchOperation("/InstanceCollection("+a+")/List","GET");var o=[s];if(this._extHookRequestForFetchListAddBatchRequests){var n=this._extHookRequestForFetchListAddBatchRequests(e,t);o=o.concat(n)}var i=function(e){var a=e[0].data.results;var s={entries:a};if(r._extHookRequestForFetchListProcess){var o=e.slice(1);r._extHookRequestForFetchListProcess(t,o,s)}return s};var c={messageKey:"PLMODataManager.error.list.fetch",batchRequests:o,process:i};return c};i.prototype.requestForCreateList=function(e,t,r){this._checkInit();var a=e.parentKey;if(a)this._checkInstanceKey(a);var s=this._escapeParamsForKey({RECNROOT:a?a.RECNROOT:"0",ACTN:a?a.ACTN:"0",RECNPARENT:a?a.RECNPARENT:"0",ESTCAT:a?a.ESTCAT:"",RECN_VP:a?a.RECN_VP:"0",ACTN_VP:a?a.ACTN_VP:"0"});var o={};var i=e.parentIndex;if(i!=null)o[n.PARENT]=i.toString();var c=this._filterList(t,r);var C=this._createBatchOperation("/InstanceCollection("+s+")/List","POST",c,o);var T=function(e){var t=e[0].data;return t};var u={messageKey:"PLMODataManager.error.list.create",batchRequests:[C],process:T,change:true};return u};i.prototype.requestForUpdateList=function(e,t){this._checkInit();this._checkListKey(e);var r=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP,RECNTVA:e.RECNTVA});var a=this._filterList(e,t);var s=this._createBatchOperation("/ListCollection("+r+")","PUT",a);var o={messageKey:"PLMODataManager.error.list.update",batchRequests:[s],change:true};return o};i.prototype.requestForDeleteList=function(e){this._checkInit();this._checkListKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP,RECNTVA:e.RECNTVA});var r=this._createBatchOperation("/ListCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.list.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchUserDefinedText=function(e){this._checkInit();if(e.LAYOUT==null){e.LAYOUT=""}if(e.RECNPARENT==null){var t=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:"",ESTCAT:e.ESTCAT,RECN_VP:"",ACTN_VP:"",LAYOUT:e.LAYOUT})}else{var t=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP,LAYOUT:e.LAYOUT})}var r=this._createBatchOperation("/InstanceUserDefinedText?"+t,"GET");var a=function(e){var t=e[0].data.results;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.userdefinedtext.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForCreateUserDefinedText=function(e,t){this._checkInit();var r=e.parentKey;if(r)this._checkInstanceKey(r);var a=this._escapeParamsForKey({RECNROOT:r?r.RECNROOT:"0",ACTN:r?r.ACTN:"0",RECNPARENT:r?r.RECNPARENT:"0",ESTCAT:r?r.ESTCAT:"",RECN_VP:r?r.RECN_VP:"0",ACTN_VP:r?r.ACTN_VP:"0"});var s={};var o=e.parentIndex;if(o!=null)s[n.PARENT]=o.toString();var i=this._filterUserDefinedText(t);var c=this._createBatchOperation("/InstanceCollection("+a+")/UserDefinedText","POST",i,s);var C=function(e){var t=e[0].data;return t};var T={messageKey:"PLMODataManager.error.userdefinedtext.create",batchRequests:[c],process:C,change:true};return T};i.prototype.requestForUpdateUserDefinedText=function(e,t){this._checkInit();if(!e.DELFLAG)e.DELFLAG="";var r=this._escapeParamsForFI({ACTN:e.ACTN,LANGU:e.LANGU,ORD:e.ORD,ESTCAT:t.ESTCAT,LTXTFLG:e.LTXTFLG,RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,RECNPARENT:e.RECNPARENT,RECNMST:e.RECNMST,TEXT:e.TEXT,TEXTNAM:e.TEXTNAM,TEXTCAT:e.TEXTCAT,DELFLG:e.DELFLAG,LAYOUT:e.LAYOUT});var a=this._createBatchOperation("/UpdateInstanceUserdefinedText?"+r,"POST");var s={messageKey:"PLMODataManager.error.userdefinedtext.update",batchRequests:a,change:true};return s};i.prototype.requestForDeleteUserDefinedText=function(e){this._checkInit();this._checkUserDefinedTextKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,RECNMST:e.RECNMST});var r=this._createBatchOperation("/UserDefinedTextCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.userdefinedtext.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchDocLink=function(e){this._checkInit();var t=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/GetDocList?"+t,"GET");var a=function(e){var t=e[0].data.results;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.doclink.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForCreateDocLink=function(e,t){this._checkInit();var r=e.parentKey;if(r)this._checkInstanceKey(r);var a=this._escapeParamsForKey({RECNROOT:r?r.RECNROOT:"0",ACTN:r?r.ACTN:"0",RECNPARENT:r?r.RECNPARENT:"0",ESTCAT:r?r.ESTCAT:"",RECN_VP:r?r.RECN_VP:"0",ACTN_VP:r?r.ACTN_VP:"0"});var s={};var o=e.parentIndex;if(o!=null)s[n.PARENT]=o.toString();var i=this._filterDocLink(t);var c=this._createBatchOperation("/InstanceCollection("+a+")/DocLink","POST",i,s);var C=function(e){var t=e[0].data;return t};var T={messageKey:"PLMODataManager.error.doclink.create",batchRequests:[c],process:C,change:true};return T};i.prototype.requestForUpdatedoclink=function(e,t){this._checkInit();var r=this._escapeParamsForFI({RECNROOT:e.RECNROOT,ACTN:e.ACTN,SUBID:e.SUBID,IDENT1:e.IDENT1,FILEPATH:e.FILEPATH,FILECONTENT:e.FILECONTENT,DOKAR:e.DOKAR,DOKNR:e.DOKNR,DOKVR:e.DOKVR,DOKTL:e.DOKTL,LOEDK:e.LOEDK});var a=this._createBatchOperation("/UpdateDocuments?"+r,"POST");var s=function(e){var t=e[0];return t};var o={messageKey:"PLMODataManager.error.doclink.update",batchRequests:[a],process:s,change:true};return o};i.prototype.requestForSubmit=function(e){var t=this._escapeParamsForFI({RECN:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/Submit?"+t,"POST");var a=function(e){var t=e[0].data;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.submit",batchRequests:[r],process:a,change:true};return s};i.prototype.requestForFetchCountry=function(e){this._checkInit();var t=this._createBatchOperation("/UsageSearchHelp?","GET");var r=function(e){var t=e[0].data.results;var r={entries:t};return r};var a={messageKey:"PLMODataManager.error.UsageSearch.fetch",batchRequests:[t],process:r};return a};i.prototype.requestForFetchLanguage=function(e){this._checkInit();var t=this._createBatchOperation("/LanguSearchHelp?","GET");var r=function(e){var t=e[0].data.results;var r={entries:t};return r};var a={messageKey:"PLMODataManager.error.UsageSearch.fetch",batchRequests:[t],process:r};return a};i.prototype.requestForDeleteDocLink=function(e){this._checkInit();this._checkDocLinkKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT});var r=this._createBatchOperation("/DocLinkCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.doclink.delete",batchRequests:[r],change:true};return a};i.prototype.getDocUploadURL=function(){this._checkInit();var e=this._getServiceURL();var t=e+"/DocCollection";return t};i.prototype.getDocDownloadURL=function(e){this._checkInit();this._checkDocKey(e);var t=this._escapeParamsForKey({DOKAR:e.DOKAR,DOKNR:e.DOKNR,DOKVR:e.DOKVR,DOKTL:e.DOKTL});var r=this._getServiceURL();var a=r+"/DocCollection("+t+")/$value";return a};i.prototype.requestForFetchUsage=function(e){this._checkInit();this._checkInstanceKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN,RECNPARENT:e.RECNPARENT,ESTCAT:e.ESTCAT,RECN_VP:e.RECN_VP,ACTN_VP:e.ACTN_VP});var r=this._createBatchOperation("/InstanceCollection("+t+")/Usage","GET");var a=function(e){var t=e[0].data.results;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.usage.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForCreateUsage=function(e,t){this._checkInit();var r=e.parentKey;if(r)this._checkInstanceKey(r);var a=this._escapeParamsForKey({RECNROOT:r?r.RECNROOT:"0",ACTN:r?r.ACTN:"0",RECNPARENT:r?r.RECNPARENT:"0",ESTCAT:r?r.ESTCAT:"",RECN_VP:r?r.RECN_VP:"0",ACTN_VP:r?r.ACTN_VP:"0"});var s={};var o=e.parentIndex;if(o!=null)s[n.PARENT]=o.toString();var i=this._filterUsage(t);var c=this._createBatchOperation("/InstanceCollection("+a+")/Usage","POST",i,s);var C=function(e){var t=e[0].data;return t};var T={messageKey:"PLMODataManager.error.usage.create",batchRequests:[c],process:C,change:true};return T};i.prototype.requestForUpdateUsage=function(e){this._checkInit();this._checkUsageKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNMST:e.RECNMST});var r=this._filterUsage(e);var a=this._createBatchOperation("/UsageCollection("+t+")","PUT",r);var s={messageKey:"PLMODataManager.error.usage.update",batchRequests:[a],change:true};return s};i.prototype.requestForDeleteUsage=function(e){this._checkInit();this._checkUsageKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN,RECNMST:e.RECNMST});var r=this._createBatchOperation("/UsageCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.usage.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchStatus=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/BasicDataCollection("+t+")/Status","GET");var a=function(e){var t=e[0].data.results;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.status.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForCreateStatus=function(e,t){this._checkInit();var r=e.parentKey;this._checkSpecificationKey(r);var a=this._escapeParamsForKey({RECNROOT:r.RECNROOT,ACTN:r.ACTN});var s=this._filterStatus(t);var o=this._createBatchOperation("/BasicDataCollection("+a+")/Status","POST",s);var n=function(e){var t=e[0].data;return t};var i={messageKey:"PLMODataManager.error.status.create",batchRequests:[o],process:n,change:true};return i};i.prototype.requestForUpdateStatus=function(e){this._checkInit();this._checkStatusKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN});var r=this._filterStatus(e);var a=this._createBatchOperation("/StatusCollection("+t+")","PUT",r);var s={messageKey:"PLMODataManager.error.status.update",batchRequests:[a],change:true};return s};i.prototype.requestForDeleteStatus=function(e){this._checkInit();this._checkStatusKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN});var r=this._createBatchOperation("/StatusCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.status.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchMaterial=function(e){this._checkInit();this._checkSpecificationKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN});var r=this._createBatchOperation("/BasicDataCollection("+t+")/Material","GET");var a=function(e){var t=e[0].data.results;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.material.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForFetchChats=function(e){var t=this._escapeParamsForFI({RECNROOT:e});var r=this._createBatchOperation("/GetChats?"+t,"GET");var a=function(e){var t=e[0].data.results;var r={entries:t};return r};var s={messageKey:"PLMODataManager.error.chats.fetch",batchRequests:[r],process:a};return s};i.prototype.requestForUpdateChats=function(e){var t=this._escapeParamsForFI({RECNROOT:e.RECNROOT,CHAT:e.CHAT,USER_NAME:e.USER_NAME,DATE:e.DATE,TIME:e.TIME,CHAT_ID:e.CHAT_ID,PARENT_CHAT:e.PARENT_CHAT});var r=this._createBatchOperation("/UpdateChats?"+t,"POST");var a=function(e){var t=e[0];return t};var s={messageKey:"PLMODataManager.error.chat.update",batchRequests:[r],process:a,change:true};return s};i.prototype.requestForCreateMaterial=function(e,t){this._checkInit();var r=e.parentKey;this._checkSpecificationKey(r);var a=this._escapeParamsForKey({RECNROOT:r.RECNROOT,ACTN:r.ACTN});var s=this._filterMaterial(t);var o=this._createBatchOperation("/BasicDataCollection("+a+")/Material","POST",s);var n=function(e){var t=e[0].data;return t};var i={messageKey:"PLMODataManager.error.material.create",batchRequests:[o],process:n,change:true};return i};i.prototype.requestForUpdateMaterial=function(e){this._checkInit();this._checkMaterialKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN});var r=this._filterMaterial(e);var a=this._createBatchOperation("/MaterialCollection("+t+")","PUT",r);var s={messageKey:"PLMODataManager.error.material.update",batchRequests:[a],change:true};return s};i.prototype.requestForDeleteMaterial=function(e){this._checkInit();this._checkMaterialKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,SPC_ACTN:e.SPC_ACTN,RECN:e.RECN,ACTN:e.ACTN});var r=this._createBatchOperation("/MaterialCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.material.delete",batchRequests:[r],change:true};return a};i.prototype.requestForFetchLayout=function(){this._checkInit();var e=this._createBatchOperation("/LayoutCollection","GET");var t=function(e){var t=e[0].data.results;for(var r=0;r<t.length;r++){var a=t[r];var s=a.ESTCAT_LIST;var o=[];if(s!="")o=s.split(" ");a.props=o}return t};var r={messageKey:"PLMODataManager.error.layout.fetch",batchRequests:[e],process:t};return r};i.prototype.requestForCreateLayout=function(e){this._checkInit();var t=this._filterLayout(e);var r=this._createBatchOperation("/LayoutCollection","POST",t);var a=function(e){var t=e[0].data;return t};var s={messageKey:"PLMODataManager.error.layout.create",batchRequests:[r],process:a,change:true};return s};i.prototype.requestForUpdateLayout=function(e){this._checkInit();this._checkLayoutKey(e);var t=this._escapeParamsForKey({IS_SYS:e.IS_SYS,ID:e.ID});var r=this._filterLayout(e);var a=this._createBatchOperation("/LayoutCollection("+t+")","PUT",r);var s={messageKey:"PLMODataManager.error.layout.update",batchRequests:[a],change:true};return s};i.prototype.requestForDeleteLayout=function(e){this._checkInit();this._checkLayoutKey(e);var t=this._escapeParamsForKey({IS_SYS:e.IS_SYS,ID:e.ID});var r=this._createBatchOperation("/LayoutCollection("+t+")","DELETE");var a={messageKey:"PLMODataManager.error.layout.delete",batchRequests:[r],change:true};return a};i.prototype.requestForUpdateDefaultLayout=function(e){this._checkInit();if(e)this._checkLayoutKey(e);var t=this._escapeParamsForFI({IS_SYS:e?e.IS_SYS:false,ID:e?e.ID:""});var r=this._createBatchOperation("/SetDefaultLayout?"+t,"POST");var a={messageKey:"PLMODataManager.error.layout.updateDefault",batchRequests:[r],change:true};return a};i.prototype.requestForFetchValueHelper=function(e,t,r){this._checkInit();this._checkValueHelperKey(e);var a=this;var s=[];if(!t){var o=this._escapeParamsForFI({EntityName:e.entityName,FieldName:e.fieldName});var n=this._createBatchOperation("/GetValueHelperHeader?"+o,"GET");s.push(n)}var i=r?this._escapeParamsForGeneric(r):"";var c=this._escapeParamsForFI({EntityName:e.entityName,FieldName:e.fieldName,Parameters:i});var n=this._createBatchOperation("/GetValueHelperList?"+c,"GET");s.push(n);var C=function(e){var r=0;if(!t){var s=e[r++].data.results;var o={};for(var n=0;n<s.length;n++){var i=s[n];o[i.FIELDNAME]=i}t={byId:o,byOrder:s}}var c=e[r++].data.results;var C=a._buildValueHelperEntries(t.byId,c);var T={headerInfo:t,headerShow:C.headerShow,entries:C.entries};return T};var T={messageKey:"PLMODataManager.error.valueHelper",batchRequests:s,process:C};return T};i.prototype.requestForFetchAdhocReportURL=function(e){this._checkInit();this._checkAdhocReportKey(e);var t=this._escapeParamsForKey({RECNROOT:e.RECNROOT,ACTN:e.ACTN,LDEPID:e.LDEPID,STATUS_CHK_IND:e.STATUS_CHK_IND,LANGU:e.LANGU,KEY_DATE:e.KEY_DATE});var r=this._createBatchOperation("/AdhocReportCollection("+t+")","GET");var a=this._getServiceURL();var s=function(e){var r=a+"/AdhocReportCollection("+t+")/$value";return r};var o={messageKey:"PLMODataManager.error.adhocReport",batchRequests:[r],process:s};return o};i.prototype._getServiceURL=function(){var e=this._extHookGetServiceURL?this._extHookGetServiceURL():this._oComponent.getComponentConfig().serviceURL;return e};i.prototype._requestForDoPostponeError=function(){this._checkInit();var e=this._createBatchOperation("/PostponeError","POST");var t={messageKey:"PLMODataManager.error.postponeError",batchRequests:[e],change:true};return t};i.prototype._buildPropTree=function(e,t){var r={};var a=null;for(var o=0;o<t.length;o++){var n=t[o];n.nodeID=this._transformPropTreeNodeID(n.ID);n.nodeParentID=this._transformPropTreeNodeID(n.PARENT);var i=r[n.nodeParentID];if(!i)i=r[n.nodeParentID]=[];i.push(n);if(n.TYPE=="ROOT"){if(a)throw new s("PLMODataManager.error.propTreeParse",[e]);a=n}}this._iBuildPropTreeLevelCount=0;if(t.length>0){if(!a){var n=t[0];if(n.TYPE!="LEAF")a=n;else throw new s("PLMODataManager.error.propTreeParse",[e])}this._buildPropTreeNode(a,r,1)}var c={rootNode:a,levelCount:this._iBuildPropTreeLevelCount};return c};i.prototype._buildPropTreeNode=function(t,r,a){e(t.TYPE!="LEAF","Node type should be non-leaf");var s=r[t.nodeID];var o=s?s:[];t.childNodes=o;if(this._iBuildPropTreeLevelCount<a)this._iBuildPropTreeLevelCount=a;for(var n=0;n<o.length;n++){var i=o[n];if(i.TYPE=="LEAF")i.childNodes=null;else this._buildPropTreeNode(i,r,a+1)}};i.prototype._transformPropTreeNodeID=function(e){var t="propTreeNodeID"+e;return t};i.prototype._buildInstances=function(e,r){var a=[];for(var o=0;o<r.length;o++){var n=r[o];var i=a[n.RECNO];if(!i)a[n.RECNO]=i={};var c=e[n.FIELDNAME];if(c){try{c.parseCharValues(n,i)}catch(e){if(!(e instanceof t))throw e;throw new s(e.messageKey,e.args)}}else{i[n.FIELDNAME]=n.FIELDVALUE}}return a};i.prototype._buildCharEntries=function(e,r){var a=[];for(var o=0;o<r.length;o++){var n=r[o];var i;try{i=e.parseCharEntry(n)}catch(e){if(!(e instanceof t))throw e;throw new s(e.messageKey,e.args)}a.push(i)}return a};i.prototype._buildInstanceBatchRequests=function(e,t){var r=[];var a=t.byOrder;for(var s=0;s<a.length;s++){var o=a[s];if(!o.getEditable(e))continue;var n=o.convertCharValues(e);if(!n)continue;var i=this._escapeParamsForFI({FieldName:n.FIELDNAME,FieldValue:n.FIELDVALUE});var c=this._createBatchOperation("/SetInstanceField?"+i,"POST");r.push(c)}return r};i.prototype._buildGroupInfo=function(e){var t={};var r=[];var a={};for(var s=0;s<e.length;s++){var o=e[s];var n=o.GRP_SUBID;var i=t[n];if(!i){i=t[n]={GRP_SUBID:n,GRP_IDENT:o.GRP_IDENT};r.push(i)}var c=o.SUBID;if(c!=""){var C=a[c];if(!C)C=a[c]={};C[n]=o.ORD}}var T={groups:r,sortsBySUBIDAndGRP_SUBID:a};return T};i.prototype._buildValueHelperEntries=function(e,t){var r={};for(var a in e)r[a]=true;var o=e._HIGH!=null;var n=[];for(var i=0;i<t.length;i++){var c=t[i];var C=parseInt(c.RECORDPOS);var T=n[C];if(!T)n[C]=T={};var a=c.FIELDNAME;var u=c.FIELDVALUE;var h=e[a];if(!h)throw new s("PLMODataManager.error.valueHelperParse");if(o&&a=="_HIGH"&&u!="")o=false;var N;switch(h.DATATYPE){case"DATS":N=this._parseValueHelperDate(u);break;default:N=u}T[a]=N}if(o)r._HIGH=false;var E={headerShow:r,entries:n};return E};i.prototype._parseValueHelperDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})$/;var r=t.exec(e);if(!r)throw new s("PLMODataManager.error.valueHelperParse");var a=parseInt(r[1]);var o=parseInt(r[2])-1;var n=parseInt(r[3]);var i=new Date(a,o,n);return i};i.prototype._checkSpecificationSUBIDKey=function(t){e(t.SUBID!=null&&t.KEYDATE!=null,"Specification SUBID key is incomplete")};i.prototype._checkSpecificationKey=function(t){e(t.RECNROOT!=null&&t.ACTN!=null,"Specification key is incomplete")};i.prototype._checkIdentifierKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.ACTN!=null&&t.RECN!=null,"Identifier key is incomplete")};i.prototype._checkPropertyKey=function(t){e(t.RECNROOT!=null&&t.ACTN!=null&&t.MENID!=null&&t.ID!=null&&t.ESTCAT!=null,"Property key is incomplete")};i.prototype._checkInstanceKey=function(t){e(t.RECNROOT!=null&&t.ACTN!=null&&t.RECNPARENT!=null&&t.ESTCAT!=null&&t.RECN_VP!=null&&t.ACTN_VP!=null,"Instance key is incomplete")};i.prototype._checkCompositionKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null&&t.RECNPARENT!=null&&t.ESTCAT!=null&&t.RECN_VP!=null&&t.ACTN_VP!=null,"Composition key is incomplete")};i.prototype._checkQualKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null&&t.RECNPARENT!=null&&t.ESTCAT!=null&&t.RECN_VP!=null&&t.ACTN_VP!=null,"Qual key is incomplete")};i.prototype._checkQuantKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null&&t.RECNPARENT!=null&&t.ESTCAT!=null&&t.RECN_VP!=null&&t.ACTN_VP!=null,"Quant key is incomplete")};i.prototype._checkListKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null&&t.RECNPARENT!=null&&t.ESTCAT!=null&&t.RECN_VP!=null&&t.ACTN_VP!=null&&t.RECNTVA!=null,"List key is incomplete")};i.prototype._checkUserDefinedTextKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null&&t.RECNPARENT!=null&&t.RECNMST!=null,"User defined text key is incomplete")};i.prototype._checkDocLinkKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null&&t.RECNPARENT!=null,"DocLink key is incomplete")};i.prototype._checkDocKey=function(t){e(t.DOKAR!=null&&t.DOKNR!=null&&t.DOKVR!=null&&t.DOKTL!=null,"Doc key is incomplete")};i.prototype._checkUsageKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null&&t.RECNMST!=null,"Usage key is incomplete")};i.prototype._checkStatusKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null,"Status key is incomplete")};i.prototype._checkMaterialKey=function(t){e(t.RECNROOT!=null&&t.SPC_ACTN!=null&&t.RECN!=null&&t.ACTN!=null,"Material key is incomplete")};i.prototype._checkLayoutKey=function(t){e(t.IS_SYS!=null&&t.ID!=null,"Layout key is incomplete")};i.prototype._checkValueHelperKey=function(t){e(t.entityName!=null&&t.fieldName!=null,"Value helper key is incomplete")};i.prototype._checkAdhocReportKey=function(t){e(t.RECNROOT!=null&&t.ACTN!=null&&t.LDEPID!=null&&t.STATUS_CHK_IND!=null&&t.LANGU!=null&&t.KEY_DATE!=null,"Adhoc Report key is incomplete")};i.prototype._filterBasicData=function(e){var t=this._filterProperties(e,["SUBCHAR","AUTHGRP","REM"]);return t};i.prototype._filterIdentifier=function(e){var t=this._filterProperties(e,["IDTYPE","IDCAT","LANGU","IDENT","ORD"]);return t};i.prototype._filterComposition=function(e,t){var r=this._filterProperties(e,["SUBID","COMPCAT","COMPEXCVAL","COMPAVGTXT","COMPEXP","PRECL","COMPLOWTXT","PRECU","COMPUPPTXT","ORD"]);if(this._extHookFilterComposition)this._extHookFilterComposition(e,t,r);return r};i.prototype._filterQual=function(e,t){var r=this._filterProperties(e,["Recn","Actn","Subid","Compcat","Subcat","Compexcval"]);if(this._extHookFilterQual)this._extHookFilterQual(e,t,r);return r};i.prototype._filterQuant=function(e,t){var r=this._filterProperties(e,["RECN","ACTN","SUBID","COMPCAT","SUBCAT","DIMID","COMPEXCVAL","COMPAVGTXT","COMPLOWTXT","COMPUPPTXT","COMPEXP","PRECL","PRECU"]);if(this._extHookFilterQuant)this._extHookFilterQuant(e,t,r);return r};i.prototype._filterList=function(e,t){var r=this._filterProperties(e,["SUBID","ORD"]);if(this._extHookFilterList)this._extHookFilterList(e,t,r);return r};i.prototype._filterUserDefinedText=function(e){var t=this._filterProperties(e,["ORD","TEXTCAT","TEXT","LANGU"]);return t};i.prototype._filterDocLink=function(e){var t=this._filterProperties(e,["ORD","TEXTCAT","DOKAR","DOKNR","DOKVR","DOKTL"]);return t};i.prototype._filterUsage=function(e){var t=this._filterProperties(e,["VACLID","RVLID","EXCLFLG","ACTVFLG","ESNTFLG"]);return t};i.prototype._filterStatus=function(e){var t=this._filterProperties(e,["VACLID","RVLTYPE","RVLID","SUBSTAT_ON_SCREEN","VALFR","VALTO","AENNR","OTYPE","REALO"]);return t};i.prototype._filterMaterial=function(e){var t=this._filterProperties(e,["MATNR","WERKS"]);return t};i.prototype._filterLayout=function(e){var t=this._filterProperties(e,["NAME","DESCR","MENID"]);t.ESTCAT_LIST=e.props.join(" ");return t};return i});